# Solana Trading Bot (Beta)

Этот бот предназначен для автоматизации торговли токенами на блокчейне Solana. Он отслеживает рыночные события в реальном времени и совершает сделки на основе заданных пользователем параметров и стратегий.

## Быстрый старт

1. Создайте новый кошелек Solana.
2. Пополните его SOL.
3. Обменяйте часть SOL на USDC или WSOL (выбор зависит от вашей конфигурации).
4. Настройте параметры в файле `.env.copy` (после редактирования уберите `.copy` из имени).
5. Установите зависимости: `npm install`
6. Запустите бота: `npm run start`

### Основные параметры

#### Кошелек

- `PRIVATE_KEY` — приватный ключ вашего кошелька.

#### Подключение

- `RPC_ENDPOINT` — HTTP RPC-адрес для работы с сетью Solana.
- `RPC_WEBSOCKET_ENDPOINT` — WebSocket RPC-адрес для получения событий в реальном времени.
- `COMMITMENT_LEVEL` — уровень подтверждения транзакций (например, "finalized").

#### Настройки бота

- `LOG_LEVEL` — уровень логирования (`info`, `debug`, `trace` и др.).
- `ONE_TOKEN_AT_A_TIME` — если `true`, бот покупает только один токен за раз.
- `COMPUTE_UNIT_LIMIT` и `COMPUTE_UNIT_PRICE` — лимит и цена вычислительных ресурсов для расчета комиссии.
- `PRE_LOAD_EXISTING_MARKETS` — при запуске бот загружает все существующие рынки в память (не рекомендуется с публичными RPC).
- `CACHE_NEW_MARKETS` — кэшировать новые рынки (не рекомендуется с публичными RPC).
- `TRANSACTION_EXECUTOR` — способ отправки транзакций: `warp` или `jito`.
- `CUSTOM_FEE` — если выбран warp или jito, эта комиссия будет использоваться вместо стандартных параметров.

#### Покупка

- `QUOTE_MINT` — какой пул использовать для покупки (USDC или WSOL).
- `QUOTE_AMOUNT` — сумма для покупки каждого токена.
- `AUTO_BUY_DELAY` — задержка перед покупкой (мс).
- `MAX_BUY_RETRIES` — максимальное число попыток покупки.
- `BUY_SLIPPAGE` — допустимый процент проскальзывания.

#### Продажа

- `AUTO_SELL` — если `true`, бот автоматически продает токены.
- `MAX_SELL_RETRIES` — максимальное число попыток продажи.
- `AUTO_SELL_DELAY` — задержка перед продажей (мс).
- `PRICE_CHECK_INTERVAL` — как часто проверять условия take profit/stop loss (мс).
- `PRICE_CHECK_DURATION` — максимальное время ожидания достижения условий (мс).
- `TAKE_PROFIT` — процент прибыли для фиксации.
- `STOP_LOSS` — процент убытка для выхода.
- `SELL_SLIPPAGE` — допустимый процент проскальзывания при продаже.

#### Список для покупки

- `USE_SNIPE_LIST` — если `true`, бот покупает только токены из файла `snipe-list.txt`.
- `SNIPE_LIST_REFRESH_INTERVAL` — как часто обновлять список (мс).

> При использовании списка фильтры не применяются.

#### Фильтры

- `FILTER_CHECK_INTERVAL` — частота проверки соответствия пула фильтрам (мс).
- `FILTER_CHECK_DURATION` — максимальное время ожидания соответствия (мс).
- `CONSECUTIVE_FILTER_MATCHES` — сколько раз подряд пул должен соответствовать фильтрам.
- `CHECK_IF_MUTABLE` — покупать только если метаданные токена неизменяемы.
- `CHECK_IF_SOCIALS` — покупать только если у токена есть соцсети.
- `CHECK_IF_MINT_IS_RENOUNCED` — покупать только если mint токена передан.
- `CHECK_IF_FREEZABLE` — покупать только если токен нельзя заморозить.
- `CHECK_IF_BURNED` — покупать только если пул ликвидности сожжен.
- `MIN_POOL_SIZE` — минимальный размер пула для покупки (0 — отключить).
- `MAX_POOL_SIZE` — максимальный размер пула для покупки (0 — отключить).

## Warp-транзакции (beta)

Если стандартные транзакции часто не проходят или слишком медленные, попробуйте использовать warp. Это сервис, который отправляет транзакции через сторонних провайдеров.

- Ваш приватный ключ не передается на сервер.
- Транзакция подписывается на вашей машине.
- Мы не храним ваши транзакции и ключи.

Warp по умолчанию выключен.

### Комиссии

При использовании warp комиссия делится между разработчиками и провайдерами. Если транзакция не прошла — комиссия не списывается.

## Частые проблемы

Если возникла ошибка, которой нет в списке — создайте issue в репозитории. Для подробной диагностики установите `LOG_LEVEL=debug`.

### Ошибка RPC

Если видите ошибку:
```
Error: 410 Gone:  {"jsonrpc":"2.0","error":{"code": 410, "message":"The RPC call or parameters have been disabled."}, "id": "some_id" }
```
— ваш RPC не поддерживает нужные методы.  
**Решение:** смените RPC, например, на Helius или Quicknode.

### Нет аккаунта токена

Если появляется:
```
Error: No SOL token account found in wallet:
```
— в кошельке нет USDC/WSOL.  
**Решение:** обменяйте SOL на USDC/WSOL через DEX. После обмена WSOL должен появиться в кошельке:

![wsol](readme/wsol.png)

## Связь

[![](https://img.icons8.com/?size=50&id=lUktdBVdL4Kb&format=png)](https://t.me/wizard_studios)

- Для индивидуальных функций или поддержки пишите в TG.

## Важно

Этот бот предоставляется только для ознакомления. Торговля криптовалютой связана с рисками. Используйте на свой страх и риск — мы не несем ответственности за возможные убытки.
